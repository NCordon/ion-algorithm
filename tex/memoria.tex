\documentclass[a4paper,11pt]{article}
% Símbolo del euro
\usepackage[gen]{eurosym}
% Codificación
\usepackage[utf8]{inputenc}
% Idioma
\usepackage[spanish]{babel} % English language/hyphenation
\selectlanguage{spanish}
% Hay que pelearse con babel-spanish para el alineamiento del punto decimal
\decimalpoint
\usepackage{dcolumn}
\newcolumntype{d}[1]{D{.}{\esperiod}{#1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}
\makeatother

\usepackage[usenames,dvipsnames]{color} % Coloring code

\usepackage{csvsimple}
\usepackage{adjustbox}
\newsavebox\ltmcbox


% Para matrices
\usepackage{amsmath}

% Símbolos matemáticos
\usepackage{amssymb}
\let\oldemptyset\emptyset
\let\emptyset\varnothing

% Hipervínculos
\usepackage{url}

\usepackage[section]{placeins} % Para gráficas en su sección.
\usepackage{mathpazo} % Use the Palatino font
\usepackage[T1]{fontenc} % Required for accented characters
\newenvironment{allintypewriter}{\ttfamily}{\par}
\setlength{\parindent}{0pt}
\parskip=8pt
\linespread{1.05} % Change line spacing here, Palatino benefits from a slight increase by default


% Imágenes
\usepackage{graphicx}
\usepackage{float}
\usepackage{caption}
\usepackage{wrapfig} % Allows in-line images



% Márgenes
\usepackage{geometry}
 \geometry{
 a4paper,
 total={210mm,297mm},
 left=30mm,
 right=30mm,
 top=25mm,
 bottom=25mm,
 }


% Referencias
\usepackage{fncylab}
\labelformat{figure}{\textit{\figurename\space #1}}

\usepackage{hyperref}
\hypersetup{
  colorlinks   = true, %Colours links instead of ugly boxes
  urlcolor     = blue, %Colour for external hyperlinks
  linkcolor    = blue, %Colour of internal links
  citecolor   = red %Colour of citations
}


\makeatletter
\renewcommand{\@listI}{\itemsep=0pt} % Reduce the space between items in the itemize and enumerate environments and the bibliography
\newcommand{\imagent}[4]{
  \begin{wrapfigure}{#4}{0.7\textwidth}
    \begin{center}
    \includegraphics[width=0.7\textwidth]{#1}
    \end{center}
    \caption{#3}
    \label{#4}
  \end{wrapfigure}
}


\newcommand{\imagen}[4]{
  \begin{minipage}{\linewidth}
    \centering
    \includegraphics[width=#4\textwidth]{#1}
    \captionof{figure}{#2}
    \label{#3}
  \end{minipage} 
}

\newcommand{\imgn}[3]{
  \begin{minipage}{\linewidth}
    \centering
    \includegraphics[width=#3\textwidth]{#1}
    \captionof{figure}{#2}
  \end{minipage} 
}

% Ejemplo de parámetro: ILS.r
\newcommand{\hrefr}[1]{
\href{../bin/#1}{#1}
}

%Customize enumerate tag
\usepackage{enumitem}
%Sections don't get numbered
%\setcounter{secnumdepth}{0}
\newcommand{\blue}[1]{\textcolor{blue}{#1}}
\begin{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% University Assignment Title Page 
% LaTeX Template
% Version 1.0 (27/12/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% WikiBooks (http://en.wikibooks.org/wiki/LaTeX/Title_Creation)
% Modified by: NCordon (https://github.com/NCordon)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
% 
% Instructions for using this template:
% This title page is capable of being compiled as is. This is not useful for 
% including it in another document. To do this, you have two options: 
%
% 1) Copy/paste everything between \begin{document} and \end{document} 
% starting at \begin{titlepage} and paste this into another LaTeX file where you 
% want your title page.
% OR
% 2) Remove everything outside the \begin{titlepage} and \end{titlepage} and 
% move this file to the same directory as the LaTeX file you wish to add it to. 
% Then add \input{./title_page_1.tex} to your LaTeX file where you want your
% title page.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Defines a new command for the horizontal lines, change thickness here

\center % Center everything on the page
 
%----------------------------------------------------------------------------------------
%	HEADING SECTIONS
%----------------------------------------------------------------------------------------
\textsc{\LARGE Universidad de Granada}\\[1.5cm]
\textsc{\Large Metaheaurísticas}\\[0.5cm] 

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------
\bigskip
\HRule \\[0.4cm]
{ \huge \bfseries Práctica Opcional}\\[0.4cm] % Title of your document
{ \huge \bfseries Algoritmo de Real Coding}\\
\HRule \\[1.5cm]
 
%----------------------------------------------------------------------------------------
%	AUTHOR SECTION
%----------------------------------------------------------------------------------------

\begin{minipage}{\textwidth}
\begin{center} \large
\emph{Algoritmo de iones}\\
\end{center}
\end{minipage}

%----------------------------------------------------------------------------------------
%	LOGO SECTION
%----------------------------------------------------------------------------------------

\begin{center}
\includegraphics[width=8cm]{./ugr.jpg}
\end{center}
%----------------------------------------------------------------------------------------

\begin{minipage}{\textwidth}
\begin{center} \large
Ignacio Cordón Castillo, 25352973G\\
\url{nachocordon@correo.ugr.es}\\
\ \\
$4^{\circ}$ Doble Grado Matemáticas Informática\\
Grupo Prácticas Viernes
\end{center}
\end{minipage}


\vspace{\fill}% Fill the rest of the page with whitespace
\large\today
\end{titlepage}  

\newpage
\tableofcontents
\newpage
% Examples of inclussion of images
%\imagent{ugr.jpg}{Logo de prueba}{ugr}
%\imagen{ugr.jpg}{Logo de prueba}{ugr2}{size relative to the \textwidth}

\section{Introducción}
Como sabemos, se trata de mejorar una metaheurística para minimizar las 20 primeras funciones 
de codificación real de la competición CEC2014, usando:

\begin{itemize}
  \item Dimensión D valuada a 10 y 30.
  \item Número de evaluaciones de cada función en una ejecucion del algoritmo: 100000 en dimensión 10, 300000
  en dimensión 30.
  \item 25 ejecuciones por función.
  \item Espacio de búsqueda de soluciones: $[-100, 100]^D$
\end{itemize}

Se compararán las medias obtenidas con estas premisas de ejecución para cada función. Además, debemos tener
en cuenta que el mínimo de la función $i-$ésima es $100\cdot i$. Cuando obtengamos los resultados, computarermos
el error respecto a dicho mínimo que hemos obtenido, de manera que buscaremos que los resultados en media
para cada una de las funciones se aproximen lo máximo posible a 0.

\section{Estado del arte}

La mayoría de técnicas para resolver problemas de optimización de funciones (las que nos ocupan son no lineales y muchas no diferenciables)
son algoritmos poblaciones, un tipo de algoritmos estocásticos en los que tenemos una serie de soluciones a las que, aplicados una serie de
operadores, van convergiendo a una posible solución del problema. Este tipo de algoritmos pueden ser divididos en tres subcategorías:

\begin{itemize}
 \item \textit{Algoritmos bioinspirados}.
 
  Basados mayormente en el modelado del comportamiento de enjambres o manadas de animales
  en la naturaleza. En este sentido, destaca PSO, algoritmo que imita el movimiento de las aves, o ACO (\textit{Ant Colony
  Optimization}). Recientemente han surgido toda una serie de algoritmos bioinspirados: \textit{Bat Algorithm}, \textit{Firefly
  Algorithm}, \textit{Cuckoo Search}, \textit{Grey Wolf Optimizatier}
  
 \item \textit{Algoritmos genéticos}.
  Los primeros estudios versaban sobre algoritmos genéticos con codificación real donde los investigadores se centraron durante mucho tiempo en
  encontrar nuevos operadores de cruce fructíferos. Fueron Rechenberg y Schwefel quienes propusieron en 1964 las estrategias
  de evolución, que se basaban en la auto-adaptabilidad de los parámetros. Nikolaus Hansen obtuvo en 1996 muy buenos resultados
  a este respecto modelando una adaptación mediante matrices de covarianza a través de su algoritmo CMAES.
  
  Posteriormente surgió la evolución diferencial, propuesta por Storm en 1997. Se trataba de un proceso estocástico por el que
  llevando una población de tuplas $n$-dimensionales, se iban mutando y recombinando para dar lugar a nuevas soluciones en un espacio
  de búsqueda. A este respecto, tenemos por ejemplo SaDE o JADE, algoritmos de Differential Evolution que auto-adaptan los 
  parámetros a los espacios de búsqueda para generar soluciones. Históricamente, la potencia de los algoritmos de Differential
  Evolution ha sido altísimo. De hecho una variante de este algoritmo, L-SHADE, resultó vencedora del reto completo (30 funciones,
  no 20) al que nos enfrentamos.
  
  En este campo también sobresalen la \textit{Programación Genética} y el \textit{Biogeography-based Optimizer}

 \item \textit{Algoritmos inspirados en la física}: la inspiración de estos algoritmos surge de leyes o fenómenos físicos.
 La diferencia respecto a los algoritmos bioinspirados es que la recombinación de soluciones se modela siguiendo ciertas
 leyes físicas, o inspirándose en ellas. Podemos citar dentro de esta subcategoría:
 
  \begin{itemize}
    \item \textit{Algoritmo de Optimización Magnética}: simula una serie de fuerzas electromagnéticas para desplazar las posiciones
    de las posibles soluciones en el espacio de búsqueda, ejerciendo las mejores soluciones mayor atracción hacia ellas.
    
    \item \textit{Algoritmo de Búsqueda Gravitacional}: se consideran una serie de masas que se atraen, siguiendo la ley
    Newtoniana del movimiento, en base a fuerzas modeladas a partir del valor que cada masa (o posible solución) produce
    en la función de \textit{fitness}.
    
    \item \textit{Algoritmo de iones}: el algoritmo que nos ocupa. Se modelan las soluciones en el espacio a través de posciones
    que pueden tener carga positiva o negativa. Cargas de distinto signo se atraen, mientras que cargas de signo opuesto se repelen.
  \end{itemize}
\end{itemize}

Al respecto del algoritmo que hemos escogido, el \textit{algoritmo de iones} sólo existe un trabajo publicado por Behzad Javidy, 
Abdolreza Hatamlou y Seyedali Mirjalili, publicado a 19 de Marzo de 2015. Los autores tratan de modelar de forma
simplificada el comportamiento de los iones en el espacio y lo comparan con algoritmos genéticos, con Differential Evolution,
con PSO y con algoritmos de Colonia de Hormigas sobre 10 funciones test, obteniendo mejores medias y mejores desviaciones
típicas que los citados algoritmos para unos parámetros prefijados.

\section{Descripción del algoritmo}

El algoritmo se basa en el movimiento de los iones(soluciones) en el espacio. Se inicia una población de iones (igual número
de cationes que de aniones) a soluciones aleatorias en el espacio.
Se modelan dos fases en el movimiento de los iones:
\begin{itemize}
 \item \textbf{Fase líquida}
 
 Para cada iteración en la que nos encontremos en fase líquida, efectuamos lo descrito a continuación.
 
 Se encuentra el mejor catión $C_{best}$ de entre la población, en términos de \textit{fitness}.
 
 Para el anión $i-$ésimo, $A_i$, y su componente $j-$ésima, se modela una fuerza de atracción:
 
 $$F_{i,j} = \frac{1}{1+e^{d_{i,j}}} \qquad \qquad d_{i,j} = {\frac{-0.1}{|A_{i}[j] - C_{best}[j]|}}$$ 
 
 y se actualiza la componente del anión a:
 
 $$A_i[j] = A_i[j] + F_{i,j} \cdot (C_{best}[j] - A_i[j])$$
 
 Se efectúa un procedimiento análogo con los cationes, acercándolos al mejor anión.
 
 La idea es buena, dado que si tenemos un catión (resp.anión) bueno, se modifican los aniones para que las componentes se
 empiecen a parecer a los de ese catión, con mayor grado de convergencia en las componentes más cercanas, y menor en las más
 lejanas.
 
 Además, la convergencia a un punto en el espacio está garantizada, puesto que la sucesión $\left\{\frac{1}{2^n}\right\}$ converge
 a 0, y se tiene $ \frac{1}{2} \le F_{i,j} \le 1$
 
 
 \item \textbf{Fase sólida}: Se modela una fase en la que una vez alcanzada la convergencia a una solución, podamos movernos
 a otros puntos del espacio.
 
 Efectuamos el siguiente proceso, que es una modificación del propuesto por los autores, puesto que en el proceso descrito
 en el artículo científico original se presentan algunas imprecisiones:
 
  \small{\texttt{\input{solidstate.tex}}}
  \normalsize

 La probabilidad de reinicio de soluciones propuesta por los autores en su \textit{paper} original es del 0.05, aunque hemos
 hecho un pequeño ajuste de los parámetros del algoritmo, a fin de optimizarlos.
 
 Cuando se reinician tanto los cationes como los aniones, se hace por supuesto a tuplas en el espacio de búsqueda: $[-100,100]^D$
 
 \texttt{best\_old\_cation} y \texttt{best\_old\_anion} representan los mejores iones de cada clase en la anterior ejecución del
 algoritmo, mientras \texttt{best\_cation} y \texttt{best\_anion} representan los mejores iones de cada clase en la actual 
 ejecución del algoritmo. Cuando se recombinan los actuales iones, cationes con los mejores cationes, iones respectivamente,
 el objetivo es explorar otras zonas del espacio de búsqueda. La eficacia de este aspecto será una de las cuestiones a debatir
 en las mejoras del algoritmo.
 
 Cuando no se reinician las soluciones, sino que se recombinan usando los mejores aniones y cationes de esta o anteriores ejecuciones,
 se observó que las soluciones no tenían porqué quedarse en el espacio de búsqueda, así que se implementó un sencillo procedimiento
 de normalización de soluciones, devolviéndolas a los límites de nuestro dominio:
 
  \small{\texttt{\input{normalization.tex}}}
  \normalsize
 
 Asimismo, la condición que modelaban los autores originalmente para entrar en esta fase sólida era:
 
  \small{\texttt{\input{condsolid.tex}}}
  \normalsize
  
 Pero usar dicha división entre 2 parecía algo ilógico. Ésta constituye una de las grandes imprecisiones que se comentaban
 anteriormente. Por ello se suprimió dicha división por 2. Más aún, ni siquiera sin esa división por 2 parecemos asegurar que abandonemos
 la fase líquida en algún momento. Esta será una de las cuestiones a debatir en las mejoras del algoritmo.
\end{itemize} 
 
 \subsection{Equilibrio Diversidad Convergencia}
 
 \subsection{Comparación con las otras metaheaurísticas}
 
 Hemos obtenido los siguientes resultados:
 
 \begin{center}
  \begin{table}[H]	
  \caption{Resultados del \textit{Algoritmo de iones}}
  \begin{adjustbox}{width=0.5\textwidth}
    
  \begin{tabular}{|l|l|l|}
  \hline
  &  \textbf{Dimensión 10}& \textbf{Dimensión 30} \\ \hline
  f1 &  1.82517e+07 &  7.27101e+07 \\ \hline
  f2 &  24758.1 &  1.37997e+07 \\ \hline
  f3 &  18000.2 &  72547.6 \\ \hline
  f4 &  52.8423 & \multicolumn{1}{r|}{227242} \\ \hline
  f5 &  20.1565 &  20.5654 \\ \hline
  f6 &  7.2295 &  34.2172 \\ \hline
  f7 &  0.886397 &  1.08524 \\ \hline
  f8 &  24.5963 & \multicolumn{1}{r|}{128436} \\ \hline
  f9 & \multicolumn{1}{r|}{28617} & \multicolumn{1}{r|}{143265} \\ \hline
  f10 &  1217.88 &  4297.57 \\ \hline
  f11 &  1095.03 &  4599.9 \\ \hline
  f12 &  0.635784 &  1.24959 \\ \hline
  f13 &  0.413744 &  0.494034 \\ \hline
  f14 &  0.47361 &  0.26897 \\ \hline
  f15 &  3.98797 &  54.5077 \\ \hline
  f16 &  3.41308 &  12.3391 \\ \hline
  f17 & \multicolumn{1}{r|}{256333} &  3.79658e+06 \\ \hline
  f18 &  8036.56 &  5221.76 \\ \hline
  f19 &  7.67194 &  43.2568 \\ \hline
  f20 &  6202.44 &  60097.9 \\ \hline
\end{tabular}
  
  \end{adjustbox}
  \label{ion-results}
  \end{table}
  \end{center}
 


\section{Propuestas de mejora del algoritmo}
\section{Conclusiones aprendidas}
\end{document}